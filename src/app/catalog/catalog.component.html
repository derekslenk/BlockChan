<div class="container">
    <div class="row">
        &nbsp;&nbsp;&nbsp;&nbsp;<a href="/"><i class="fa fa-home navgreen"></i></a><span class="grey"> | </span><a href="/boards"><i class="fa fa-th-list navgreen"></i></a>&nbsp;&nbsp;<span class="grey">[ </span>
        <span class="openBoard" (click)="OpenPolitics()">pol</span><span class="grey"> / </span>
        <span class="openBoard" (click)="OpenBusiness()">biz</span><span class="grey"> / </span>
        <span class="openBoard" (click)="OpenAnime()">a</span><span class="grey"> / </span>
        <span class="openBoard" (click)="OpenWeapons()">k</span><span class="grey"> / </span>
        <span class="openBoard" (click)="OpenMeta()">m</span><span class="grey"> / </span>
        <span class="openBoard" (click)="OpenTechnology()">g</span><span class="grey"> / </span>
        <span class="openBoard" (click)="OpenRandom()">b</span><span class="grey"> ]</span>
    </div>
    <div class="row uk-text-center text-center">
        <img [src]="HeaderImage">
    </div>
<div class="row uk-text-center upload-container" [hidden]="!ShowPostingForm">

    <input type="file"
    id="file"
    (change)="handleFileInput($event.target.files)">
    Title: <input type="text'" [(ngModel)] = "postTitle" style="width:100%"><br>
    <div>{{ postTitle.length }}/80</div>
    Message: <textarea [(ngModel)] = "postMessage" rows="4" style="width:100%"></textarea>
    <div>{{ postMessage.length }}/420</div>

    <div class="row">
        <div class="col-lg-3"></div>
        <div class="col-lg-6">
            <div [hidden]="ShowTripEntry">
                <div (click)="AddTrip()" class="btn btn-wrapper btn-default btn-round" style="width:100%">
                    Add Trip Code
                </div>
            </div>
        </div>
        <div class="col-lg-3"></div>
    </div>
    <div class="row">
        <div class="col-lg-3"></div>
        <div class="col-lg-6">
            <div style="margin-top:7px; padding-top: 7px; margin-bottom:7px; padding-bottom: 7px;" [hidden]="!ShowTripEntry">
                    <b>Trip Code</b> (Requires attaching your Ripple Wallet. Trip is generated from your signed post w/ your credentials below):
                    <br>
                    <br>
                    <a href="https://jatchili.github.io/minimalist-ripple-client/">Generate wallet here</a> by clicking generate identity. Your new address is is displayed
                    <br> above the button "show/hide secret", click that button to show your secret. SAVE BOTH of these. For wallet to be usable/active, you must send 20 XRP or more to it. 
                    <br>
                    Instructions for obtaining XRP is <a href="https://cointelegraph.com/ripple-101/ripple-xrp-wallets-for-beginners">here</a>
                    <br>
                    <br>                <br>
                XRP Address: <input type="text" [(ngModel)] = "TripAddress" rows="4" style="width:100%">
                XRP Key: <input type="text" [(ngModel)] = "TripSecret" rows="4" style="width:100%">
                Poster Name: <input type="text" [(ngModel)] = "posterName" rows="4" style="width:100%">
            </div>
        </div>
        <div class="col-lg-3"></div>
    </div>

    <div style="margin-top:7px; padding-top: 7px; margin-bottom:7px; padding-bottom: 7px;">
    Tip Address (ETH): <input type="text" [(ngModel)] = "EthTipAddress" rows="4" style="width:100%">
    </div>
    <div [hidden]="!PostingEnabled">
        <div (click)="post()" class="btn btn-wrapper btn-default btn-round" style="width:100%">Post</div>
        <div  [hidden]="PostIsEncrypted">
            <br>
            <div (click)="ConfirmEncryption()" class="btn btn-wrapper btn-default btn-round" style="width:100%">
                Post Encrypted
            </div>
        </div>
        <br>
        <div>
            <ul class="list-inline text-center" [hidden]="!PostIsEncrypted">                
                    <li><i class="fa fa-lock"></i></li> 
            </ul>
        </div>
    </div>    
    <div [hidden]="!PostingEnabled">
        <div (click)="togglePostingForm()" class="btn btn-wrapper btn-primary btn-round" style="width:100%">Close</div>
    </div>
    <div [hidden]="PostingEnabled">
        <div class="btn btn-wrapper btn-primary btn-round" style="width:100%">
            Posting enabled in {{ PostingSecondsLeftCounter }} seconds.
        </div>
    </div>
</div>   
<div class="text-center" [hidden]="!Posting">
        <h3>Posting...</h3>
        <span style="display:inline-block"><mat-spinner ></mat-spinner></span>
    </div>
    <div class="row board-container text-center" [hidden]="!PostingError">
        <div class="btn btn-wrapper btn-round" style="width:100%">Error Posting</div>
    </div> 
<br [hidden]="!ShowPostingForm">
<div class="row">
    <div class="boardHeader center-text">/{{ postBoard }}/ - {{ postBoardName }}</div>
</div>   
<div class="row">
    <hr class="belowBoard">
</div>
<div class="row" [hidden]="ShowPostingForm">
    <div class="center-text">
        <span class="center-text post-reply-btn" (click)="togglePostingForm()" style="cursor: pointer">
            <span class="replybracket">[</span>
            Start a New Thread
            <span class="replybracket">]</span>
        </span>
    </div>
</div>
<div class="row">
    <div class="col-lg-4"></div>
    <div class="col-lg-4">        
        <hr>
    </div>
    <div class="col-lg-4"></div>
</div>
<div class="row">
    <div class="col-lg-4"></div>
    <div class="col-lg-4">
            <tbody id="blotter-msgs" class="blotter">
            <tr>
                <td data-utc="1493903967" class="blotter-date" style="color:green">08/31/19</td>
                <td class="blotter-content">Moderation mode added to not download/show content from flagged posts/threads (unmoderated version is never touched). Searching and sorting added. New boards added (anime, weapons, technology, meta). Trello added to view future progress: <a href="https://trello.com/b/C7wVrMd3/blockchan">https://trello.com/b/C7wVrMd3/blockchan</a></td>
            </tr>
            <tr>
                <td data-utc="1493903967" class="blotter-date">08/24/19</td>
                <td class="blotter-content">Trip code functionality added</td>
            </tr>
            <tr>
                <td data-utc="1493903967" class="blotter-date">08/23/19</td>
                <td class="blotter-content">UID's added to posts</td>
            </tr>
            <tr>
                <td data-utc="1493903967" class="blotter-date">08/16/19</td>
                <td class="blotter-content">Tipping with ETH is now available by clicking Tip Shekels</td>
            </tr>
            <tr>
                <td data-utc="1475592573" class="blotter-date">08/14/19</td>
                <td class="blotter-content">You can now Encrypt posts with a client generated key. To open post or comment in post, you must have the key</td>
            </tr>
            <tr><td data-utc="1466421827" class="blotter-date">08/13/19</td>
                <td class="blotter-content">Comment Linking and speed improvements added. UI Updates.</td>
            </tr>
        </tbody>
    </div>
    <div class="col-lg-4"></div>
</div>
<div class="row rowspacer2">     
    <hr class="smallPadding"> 
</div>
<div class="text-center" [hidden]="!PostLoading">
    <h3>Loading...</h3>
    <span style="display:inline-block"><mat-spinner ></mat-spinner></span>
</div>
<div class="row" *ngIf="threads !== null">
    <div class="col-lg-1">
            <span class="util">
                <span style="cursor: pointer" onclick="window.scrollTo(0,document.body.scrollHeight);">[Bottom] </span>
                <span style="cursor: pointer" (click)="refresh()">[Update]</span>
            </span>
    </div>
    <div class="col-lg-4">
        <span class="util" style="float:left; margin-top:1px; padding-top:1px;">
            sort:        
            <select id="order-ctrl" size="1" (change)="sortThreads($event.target.value)" [(ngModel)]="Config.Sort">
                <option value="LastReply">Last reply</option> 
                <option value="CreateDate">Creation date</option> 
                <option value="ReplyCount">Reply count</option> 
            </select>     
        </span>   
        &nbsp; 
        <span *ngIf="Config.LastUpdateTime" class="util" >Last Update: {{  Config.LastUpdateTime | date:'medium' }}</span>

    </div>
    <div class="col-lg-1">        
        </div>
    <div class="col-lg-3">

    </div>    
    <div class="col-lg-3">   
        <span class="util counters" style="float:right;">
                {{ threads.length }} threads
        </span>
        <span class="util" [hidden]="!ShowSearch"> Search: <input type="text" [(ngModel)]="search" (ngModelChange)="filterCatalog($event)" style="font-size:10px;"></span>
        <span class="util" [hidden]="!ShowSearch" (click)="ToggleHideSearch()"  style="cursor:pointer"> x </span>
        <span class="util" [hidden]="ShowSearch" style="cursor:pointer; float:right" (click)="ToggleShowSearch()">[Search] &nbsp;</span>
    </div>
</div>    
<div class="row">
    <hr class="smallPadding"> 
</div>
<div class="row uk-text-center upload-container">
    <div *ngFor="let row of threads; let i = index">
        <div *ngIf=" i % 6 === 0 " class="row">
            <div *ngFor="let thread of threads.slice(i,i+6)">         
                <div class="col-lg-2" >
                    <div class="progress-container" *ngIf="!thread.FilteredBySearch"> 
                        <span style="float:right; margin-top:-8px; margin-right:3px; cursor:pointer" (click)="OpenPostInNewWindows(thread)" title="Open in New Window">â‡—</span>
                        <div class="progress-item-container" *ngIf="thread.IndImmChanPostModelParent.ImageLoading" (click)="OpenThread(thread)">
                            <span style="display:inline-block"><mat-spinner ></mat-spinner></span>
                        </div>
                        <div class="progress-item-container" *ngIf="thread.IndImmChanPostModelParent.Base64Image && !thread.IndImmChanPostModelParent.IsWebm" (click)="OpenThread(thread)">
                            <img [src]=" thread.IndImmChanPostModelParent.Base64Image" width="150px">
                        </div>
                        <div class="webmContainer" *ngIf="thread.IndImmChanPostModelParent.Base64Image && thread.IndImmChanPostModelParent.IsWebm">
                            <video width="215" controls>
                                <source [src]="thread.IndImmChanPostModelParent.Base64Image" type="video/webm">
                            </video>
                        </div>
                        <div class="progress-item-container" (click)="ManualOverRideShowImage(thread.IndImmChanPostModelParent)" *ngIf="!thread.IndImmChanPostModelParent.ShowImageOverride
                            && thread.IndImmChanPostModelParent.HasImage && !this.Config.ShowImages">
                            <div class="btn btn-wrapper btn-primary btn-round click-show">Show Image Preview</div>
                        </div>                        
                        <div class="progress-item-container title" (click)="OpenThread(thread)">
                        <b>{{  thread.IndImmChanPostModelParent.Title | slice:0:140 }}</b>
                        </div>
                        <div class="progress-item-container small" (click)="OpenThread(thread)">
                            Images: {{  thread.ImageReplies }} |&nbsp; Replies: {{  thread.TotalReplies }}
                        </div>
                        <div class="progress-item-container tiny"  (click)="OpenThread(thread)">
                            Last: {{  thread.LastCommentTime | date:'medium' }}
                        </div>
                        <div class="progress-item-container-encrypted" *ngIf="thread.IndImmChanPostModelParent.Enc" (click)="OpenThread(thread)">
                                <ul class="list-inline text-center">                
                                        <li><i class="fa fa-lock lockfont"></i></li> 
                                </ul>    
                            Encrypted Thread. Open thread and enter key to decrypt.
                        </div>
                        <div class="progress-item-container-encrypted" *ngIf="thread.IndImmChanPostModelParent.EncDemo">
                            Demo Thread, Use following keys/IV to view/post:
                            <br>
                            <span class="wht">Key: </span><br> XfysAu7BDaa1dKdzaOkkPxPTVmIsFUcCOt7O6thMCms=
                            <br>
                            <span class="wht">IV: </span><br> Ps1cYZHxlQga2dnSeelgfA==
                        </div>
                     <!--   <div (click)="OpenThread(thread.IndImmChanPostModelParent.Tx)" class="btn btn-wrapper btn-default btn-round" style="width:100%">Open</div>
                    -->
                    </div>       
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row rowspacer2">     
    <hr class="smallPadding"> 
</div>
<div class="row" *ngIf="threads !== null">
        <div class="col-lg-4">
                <span class="util"><span style="cursor: pointer" onclick="window.scrollTo(0,0);">[Top] </span> <span style="cursor: pointer" (click)="refresh()">[Update]</span></span>
        </div>
        <div class="col-lg-4">        
            
        </div>
        <div class="col-lg-4">
            <span class="util counters">
                {{ threads.length }} threads
            </span>
            </div>    
    </div>  
</div>
<!-- <div class="row" *ngIf="i%3===0">  -->
